<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="htmx-config" content='{"scrollIntoViewOnBoost":false}'>
    <title>{{ partial "title" }} | Home Inventory</title>
    <script
      src="https://unpkg.com/htmx.org@1.9.10"
      integrity="sha384-D1Kt99CQMDuVetoL1lrYwg5t+9QdHe7NLX/SoJYkXDFfX37iInKRy5xLSi8nO7UC"
      crossorigin="anonymous"
    ></script>
    <link href="/static/main.css" rel="stylesheet" />
  </head>

  <body>
    <div class="flex min-h-screen w-full">
      {{ if .ShouldShowSidebar }} {{ template "sidebar" . }} {{ end }}
      <div class="flex flex-col w-full">
        {{ template "header" . }}
        <main class="flex flex-1 flex-col gap-4 p-2 md:gap-8 xl:p-6">
          {{ yield }}
        </main>
      </div>
    </div>

    <div
      x-data="{show: false, level: '', levelTitle: '', text: '', timeout: null, colors: {danger: 'red', info: 'blue', success: 'green', warning: 'yellow'}}"
      @show-toast.window="clearTimeout(timeout); show = true; level=$event.detail.level; levelTitle=$event.detail.levelTitle; text=$event.detail.message; timeout = setTimeout(() => show = false, 5000);"
      x-show="show"
      style="display: none"
      class="fixed top-5 left-1/2 transform -translate-x-1/2 w-[400px]"
    >
      <div
        role="alert"
        class="rounded border-s-4 p-4 border"
        :class="`border-${colors[level]}-500 bg-${colors[level]}-50`"
      >
        <div
          class="flex items-center gap-2"
          :class="`text-${colors[level]}-800`"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="h-5 w-5"
          >
            <path
              fill-rule="evenodd"
              d="M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z"
              clip-rule="evenodd"
            />
          </svg>

          <strong class="block font-medium" x-text="levelTitle"></strong>
        </div>

        <p
          class="mt-2 text-sm"
          :class="`text-${colors[level]}-700`"
          x-text="text"
        ></p>
      </div>
    </div>

    <script
      defer
      src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
  </body>
</html>
